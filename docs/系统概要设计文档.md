# 《Journal of Rubbish》投稿网站 - 系统概要设计文档

**文档版本**: 1.0  
**创建日期**: 2026年1月21日  
**系统架构师**: 待定  
**适用版本**: 基于PRD v1.0  

---

## 1. 架构决策

### 1.1 整体技术架构选型

**架构模式**: **纯静态网站架构 (Static Site Architecture)**

**选型理由**:
1. **需求匹配**: 根据PRD要求，网站为纯展示性质，无需用户数据提交、登录认证、数据库存储等动态功能
2. **部署简便**: 可直接部署至GitHub Pages、Netlify、Vercel等静态托管服务，符合"部署在GitHub Pages"的需求
3. **性能优异**: 静态文件加载速度快，无服务器端处理延迟，满足"首屏加载时间 ≤ 3秒"的性能指标
4. **成本为零**: 静态托管服务通常提供免费额度，符合"做着玩"的娱乐项目定位
5. **维护简单**: 无需服务器运维，内容更新通过Git提交即可

**否决方案**:
- **微服务架构**: 过度设计，本项目无复杂业务逻辑和服务拆分需求
- **单体应用+后端**: 增加不必要复杂度，违背"静态就行"的核心要求
- **CMS系统**: 如WordPress，需要服务器和数据库，不符合静态部署要求

### 1.2 技术栈选择

| 技术层 | 技术选型 | 版本 | 选型理由 |
|--------|---------|------|---------|
| **前端框架** | 原生HTML5 + CSS3 + JavaScript (ES6+) | 最新标准 | 轻量级，无构建依赖，符合静态网站本质 |
| **CSS框架** | 自定义CSS + CSS Grid/Flexbox | - | 避免Bootstrap等框架的冗余，实现精准的学术期刊风格 |
| **JavaScript库** | 原生DOM API | - | 功能简单，无需引入大型框架，减少加载体积 |
| **搜索功能** | 原生JavaScript搜索算法 | - | 或可选用轻量级lunr.js (仅6KB) 若搜索需求复杂 |
| **构建工具** | 可选: Parcel (零配置打包工具) | 2.x | 如需代码压缩、资源优化等增强功能 |
| **版本控制** | Git + GitHub | 最新 | 符合部署到GitHub Pages的需求 |

### 1.3 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│                   用户访问层 (User Access)                    │
├─────────────────────────────────────────────────────────────┤
│ 浏览器/移动设备 → 扫码/直接访问 → GitHub Pages/CDN           │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                   静态文件服务层 (Static Files)               │
├─────────────────────────────────────────────────────────────┤
│  index.html         articles.json        about.html         │
│  ├── 核心布局        ├── 20篇文章数据      ├── 期刊介绍        │
│  ├── 首页功能        └── 搜索索引          └── 联系我们        │
│  ├── 导航系统                                              │
│  └── 响应式设计                                            │
│                                                            │
│  css/               js/                assets/             │
│  ├── style.css      ├── main.js        ├── images/         │
│  ├── responsive.css ├── search.js      └── fonts/          │
│  └── modal.css      └── modal.js                           │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                   客户端运行时层 (Client Runtime)             │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
│  │  数据加载   │    │  页面渲染   │    │  用户交互   │    │
│  │  ∙ 加载JSON │    │  ∙ DOM操作  │    │  ∙ 点击事件 │    │
│  │  ∙ 缓存管理 │    │  ∙ 模板渲染 │    │  ∙ 搜索逻辑 │    │
│  │  ∙ 错误处理 │    │  ∙ 响应式   │    │  ∙ 弹窗控制 │    │
│  └─────────────┘    └─────────────┘    └─────────────┘    │
└─────────────────────────────────────────────────────────────┘
```

**架构说明**:
1. **无服务端层**: 所有逻辑在客户端浏览器中执行
2. **数据驱动**: 文章数据通过JSON文件静态提供
3. **渐进增强**: 基础功能在无JavaScript环境下可用，增强功能需要JS支持

### 1.4 开发环境配置

```bash
# 项目结构
journal-of-rubbish/
├── index.html          # 首页
├── about.html          # 期刊介绍页
├── contact.html        # 联系我们页
├── articles/           # 文章详情页目录
│   ├── article-1.html
│   ├── article-2.html
│   └── ...
├── css/                # 样式文件目录
│   ├── style.css       # 主样式
│   ├── responsive.css  # 响应式样式
│   └── modal.css       # 弹窗样式
├── js/                 # JavaScript文件目录
│   ├── main.js         # 主逻辑
│   ├── search.js       # 搜索功能
│   └── modal.js        # 弹窗功能
├── data/               # 数据文件目录
│   └── articles.json   # 文章数据
├── assets/             # 静态资源目录
│   ├── images/         # 图片资源
│   └── fonts/          # 字体文件
└── docs/               # 文档目录
    ├── PRD.md          # 需求文档
    └── 系统概要设计文档.md  # 本文档
```

---

## 2. 模块分解

### 2.1 核心布局模块 (Core Layout Module)

**职责**: 提供网站统一的页面结构和导航系统
**边界**: 所有页面的公共部分，不包含页面特定内容

| 组件 | 功能描述 | 接口/API |
|------|---------|---------|
| 头部导航 | 顶部固定导航栏，包含Logo、主导航菜单、搜索框 | `renderHeader()`: 渲染导航HTML<br>`handleNavClick()`: 处理导航点击 |
| 页脚 | 底部版权信息、备案号等 | `renderFooter()`: 渲染页脚HTML |
| 响应式容器 | 页面内容容器，响应式宽度控制 | CSS类: `.container`, `.container-fluid` |

### 2.2 文章数据管理模块 (Article Data Module)

**职责**: 管理20篇虚假文章的存储、加载和访问
**边界**: 数据层，不涉及UI展示逻辑

| 组件 | 功能描述 | 接口/API |
|------|---------|---------|
| 数据加载器 | 从JSON文件加载文章数据 | `loadArticles()`: 异步加载数据<br>`getAllArticles()`: 获取所有文章 |
| 数据缓存 | 在内存中缓存文章数据，避免重复加载 | `cacheArticles(data)`: 缓存数据<br>`getCachedArticles()`: 获取缓存数据 |
| 数据筛选器 | 按标签、关键词等条件筛选文章 | `filterByTag(tag)`: 按标签筛选<br>`searchArticles(keyword)`: 关键词搜索 |

### 2.3 文章展示模块 (Article Display Module)

**职责**: 负责文章列表和详情页的渲染和交互

| 子模块 | 功能描述 | 接口/API |
|--------|---------|---------|
| 文章列表渲染 | 在首页显示文章卡片列表 | `renderArticleList(articles, container)`: 渲染文章列表<br>`renderArticleCard(article)`: 渲染单个文章卡片 |
| 文章详情渲染 | 渲染完整的文章详情页面 | `renderArticleDetail(article)`: 渲染文章详情<br>`generateArticlePage(article)`: 生成静态文章页 |
| 标签筛选器 | 处理期刊标签筛选功能 | `handleTagFilter(tag)`: 处理标签点击<br>`updateArticleListByTag(tag)`: 按标签更新列表 |

### 2.4 搜索功能模块 (Search Module)

**职责**: 实现前端文章搜索功能，支持标题和作者搜索

| 组件 | 功能描述 | 接口/API |
|------|---------|---------|
| 搜索索引构建 | 为文章数据构建搜索索引 | `buildSearchIndex(articles)`: 构建搜索索引 |
| 搜索执行器 | 执行搜索查询，返回匹配结果 | `search(query, field)`: 执行搜索<br>`highlightResults(results, query)`: 高亮搜索结果 |
| 搜索界面 | 搜索框UI和结果展示 | `renderSearchBox()`: 渲染搜索框<br>`showSearchResults(results)`: 显示搜索结果 |

### 2.5 弹窗交互模块 (Modal Interaction Module)

**职责**: 管理功能入口弹窗的显示和交互

| 组件 | 功能描述 | 接口/API |
|------|---------|---------|
| 弹窗管理器 | 控制弹窗的显示、隐藏和生命周期 | `showModal(type, message)`: 显示弹窗<br>`hideModal()`: 隐藏弹窗 |
| 弹窗模板 | 弹窗的HTML结构和样式 | `createModalTemplate(type, message)`: 创建弹窗HTML |
| 事件绑定 | 绑定功能入口按钮的点击事件 | `bindModalEvents()`: 绑定弹窗事件 |

### 2.6 响应式设计模块 (Responsive Design Module)

**职责**: 确保网站在不同设备上正常显示

| 组件 | 功能描述 | 接口/API |
|------|---------|---------|
| 布局适配器 | 根据不同屏幕尺寸调整布局 | CSS媒体查询: `@media (max-width: 768px)` |
| 图片响应式 | 根据设备像素比提供合适图片 | `<picture>`元素 + `srcset`属性 |
| 字体适配 | 根据屏幕尺寸调整字体大小 | CSS `clamp()`函数 + 相对单位 |

### 2.7 静态页面模块 (Static Pages Module)

**职责**: 管理期刊介绍和联系我们等静态内容页面

| 组件 | 功能描述 | 接口/API |
|------|---------|---------|
| 页面模板 | 静态页面的统一模板结构 | `createPageTemplate(title, content)`: 创建页面模板 |
| 内容管理器 | 管理静态页面内容 | `loadPageContent(pageId)`: 加载页面内容<br>`renderPage(pageId, container)`: 渲染页面 |

### 2.8 模块依赖关系

```
核心布局模块
    ├── 文章展示模块 (依赖数据)
    │    ├── 文章数据管理模块
    │    └── 标签筛选器
    ├── 搜索功能模块 (依赖数据)
    │    └── 文章数据管理模块
    ├── 弹窗交互模块 (独立)
    ├── 响应式设计模块 (贯穿所有)
    └── 静态页面模块 (独立)
```

---

## 3. 关键技术方案

### 3.1 前端搜索功能实现方案

**需求**: 支持文章标题和作者搜索，响应时间 ≤ 500ms

**方案选择**: **轻量级客户端搜索索引**

**方案一**: 原生JavaScript搜索 (推荐)
```javascript
// 简单字符串匹配搜索
function searchArticles(query, articles) {
    const normalizedQuery = query.toLowerCase().trim();
    return articles.filter(article => {
        // 标题搜索
        const titleMatch = article.title.toLowerCase().includes(normalizedQuery);
        // 作者搜索
        const authorMatch = article.authors.some(author => 
            author.name.toLowerCase().includes(normalizedQuery)
        );
        return titleMatch || authorMatch;
    });
}
```

**方案二**: 使用lunr.js (备用，如需高级搜索)
- 优点: 支持全文搜索、模糊匹配、权重排序
- 缺点: 增加6KB的库体积
- 实现:
```javascript
// 构建lunr搜索索引
const idx = lunr(function() {
    this.ref('id');
    this.field('title');
    this.field('authors');
    this.field('abstract');
    
    articles.forEach(article => {
        this.add({
            id: article.id,
            title: article.title,
            authors: article.authors.map(a => a.name).join(' '),
            abstract: article.abstract
        });
    });
});
```

**性能优化措施**:
1. **数据预加载**: 页面加载时立即加载文章数据
2. **索引缓存**: 搜索索引构建后缓存在内存中
3. **防抖处理**: 搜索输入框添加300ms防抖，避免频繁搜索
4. **虚拟滚动**: 搜索结果超过50条时启用虚拟滚动

### 3.2 弹窗系统实现方案

**需求**: 点击功能入口显示"不给进"弹窗，有关闭按钮

**方案**: **纯CSS + JavaScript模态对话框**

```html
<!-- HTML结构 -->
<div class="modal-overlay" id="modalOverlay">
    <div class="modal-container">
        <div class="modal-header">
            <h3>系统提示</h3>
            <button class="modal-close">&times;</button>
        </div>
        <div class="modal-content">
            <p>不给进</p>
        </div>
        <div class="modal-footer">
            <button class="btn-confirm">确定</button>
        </div>
    </div>
</div>
```

```css
/* CSS样式 */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-container {
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    max-width: 400px;
    width: 90%;
}
```

```javascript
// JavaScript控制
class ModalSystem {
    constructor() {
        this.modal = document.getElementById('modalOverlay');
        this.bindEvents();
    }
    
    show(message = '不给进') {
        document.querySelector('.modal-content p').textContent = message;
        this.modal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // 防止背景滚动
    }
    
    hide() {
        this.modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    bindEvents() {
        // 关闭按钮
        document.querySelector('.modal-close').addEventListener('click', () => this.hide());
        // 确定按钮
        document.querySelector('.btn-confirm').addEventListener('click', () => this.hide());
        // 点击遮罩层关闭
        this.modal.addEventListener('click', (e) => {
            if (e.target === this.modal) this.hide();
        });
        // ESC键关闭
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.modal.style.display === 'flex') {
                this.hide();
            }
        });
    }
}
```

### 3.3 响应式设计实现方案

**需求**: 适配手机、平板、电脑不同屏幕尺寸

**方案**: **移动优先 + CSS Grid/Flexbox + 媒体查询**

```css
/* 移动优先基础样式 */
.container {
    width: 100%;
    padding: 0 15px;
    margin: 0 auto;
}

/* 文章卡片网格布局 */
.articles-grid {
    display: grid;
    grid-template-columns: 1fr; /* 手机单列 */
    gap: 20px;
    margin: 30px 0;
}

/* 平板适配 (768px以上) */
@media (min-width: 768px) {
    .container {
        max-width: 720px;
    }
    
    .articles-grid {
        grid-template-columns: repeat(2, 1fr); /* 平板双列 */
    }
    
    .header-nav {
        flex-direction: row; /* 平板以上横向导航 */
    }
}

/* 桌面适配 (992px以上) */
@media (min-width: 992px) {
    .container {
        max-width: 960px;
    }
    
    .articles-grid {
        grid-template-columns: repeat(3, 1fr); /* 桌面三列 */
    }
}

/* 大桌面适配 (1200px以上) */
@media (min-width: 1200px) {
    .container {
        max-width: 1140px;
    }
    
    .articles-grid {
        grid-template-columns: repeat(4, 1fr); /* 大桌面四列 */
    }
}
```

**响应式字体方案**:
```css
/* 使用clamp()实现响应式字体 */
:root {
    --font-size-base: clamp(14px, 2vw, 16px);
    --font-size-h1: clamp(24px, 5vw, 36px);
    --font-size-h2: clamp(20px, 4vw, 28px);
}

body {
    font-size: var(--font-size-base);
}

h1 {
    font-size: var(--font-size-h1);
}

h2 {
    font-size: var(--font-size-h2);
}
```

### 3.4 文章数据加载与渲染方案

**需求**: 20篇文章的加载和渲染，支持列表和详情视图

**方案**: **JSON数据文件 + 客户端模板渲染**

```javascript
// 数据加载策略
class ArticleManager {
    constructor() {
        this.articles = [];
        this.cacheKey = 'jor_articles_cache';
        this.cacheExpiry = 24 * 60 * 60 * 1000; // 24小时缓存
    }
    
    async loadArticles() {
        // 1. 检查本地缓存
        const cached = this.getCachedArticles();
        if (cached) {
            this.articles = cached;
            return this.articles;
        }
        
        // 2. 从JSON文件加载
        try {
            const response = await fetch('/data/articles.json');
            if (!response.ok) throw new Error('Failed to load articles');
            
            const data = await response.json();
            this.articles = data.articles;
            
            // 3. 缓存到本地存储
            this.cacheArticles(data.articles);
            
            return this.articles;
        } catch (error) {
            console.error('Error loading articles:', error);
            // 4. 降级方案: 使用内置的默认数据
            this.articles = this.getDefaultArticles();
            return this.articles;
        }
    }
    
    cacheArticles(articles) {
        const cacheData = {
            timestamp: Date.now(),
            data: articles
        };
        localStorage.setItem(this.cacheKey, JSON.stringify(cacheData));
    }
    
    getCachedArticles() {
        const cached = localStorage.getItem(this.cacheKey);
        if (!cached) return null;
        
        const cacheData = JSON.parse(cached);
        const isExpired = Date.now() - cacheData.timestamp > this.cacheExpiry;
        
        return isExpired ? null : cacheData.data;
    }
}
```

**模板渲染策略**:
```javascript
// 使用模板字符串进行客户端渲染
function renderArticleCard(article) {
    return `
        <article class="article-card" data-id="${article.id}">
            <div class="article-tags">
                ${article.tags.map(tag => `<span class="tag tag-${tag}">${tag}</span>`).join('')}
            </div>
            <h3 class="article-title">${article.title}</h3>
            <div class="article-meta">
                <span class="authors">${article.authors.map(a => a.name).join(', ')}</span>
                <span class="date">${formatDate(article.publication_date)}</span>
            </div>
            <p class="article-abstract">${article.abstract.substring(0, 150)}...</p>
            <a href="/articles/article-${article.id}.html" class="btn-read-more">阅读全文</a>
        </article>
    `;
}
```

### 3.5 期刊标签筛选方案

**需求**: 按"被打核心"、"垃科院一区silence"、"nothing"标签筛选文章

**方案**: **客户端筛选 + URL哈希状态管理**

```javascript
class TagFilter {
    constructor() {
        this.activeTag = null;
        this.articles = [];
        this.init();
    }
    
    init() {
        // 1. 绑定标签点击事件
        document.querySelectorAll('.journal-tag').forEach(tag => {
            tag.addEventListener('click', (e) => {
                const tagName = e.target.dataset.tag;
                this.setActiveTag(tagName);
                this.filterArticles();
                this.updateURLHash(tagName);
            });
        });
        
        // 2. 初始化时检查URL哈希
        const hashTag = window.location.hash.substring(1);
        if (hashTag) {
            this.setActiveTag(hashTag);
            this.filterArticles();
        }
    }
    
    setActiveTag(tag) {
        this.activeTag = tag;
        // 更新UI状态
        document.querySelectorAll('.journal-tag').forEach(t => {
            t.classList.toggle('active', t.dataset.tag === tag);
        });
    }
    
    filterArticles() {
        if (!this.activeTag) {
            return this.articles; // 无筛选，返回所有文章
        }
        
        return this.articles.filter(article => 
            article.tags.includes(this.activeTag)
        );
    }
    
    updateURLHash(tag) {
        if (tag) {
            window.location.hash = tag;
        } else {
            history.replaceState(null, null, window.location.pathname);
        }
    }
}
```

---

## 4. 数据模型设计

### 4.1 核心数据结构 (JSON Schema)

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Journal of Rubbish Articles Data",
  "type": "object",
  "properties": {
    "metadata": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string",
          "description": "数据版本号"
        },
        "generated_at": {
          "type": "string",
          "format": "date-time",
          "description": "数据生成时间"
        },
        "total_articles": {
          "type": "integer",
          "description": "文章总数"
        }
      },
      "required": ["version", "generated_at", "total_articles"]
    },
    "articles": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/article"
      },
      "minItems": 20,
      "maxItems": 20
    }
  },
  "required": ["metadata", "articles"],
  "definitions": {
    "article": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "文章唯一ID，从1开始连续编号"
        },
        "title": {
          "type": "string",
          "description": "文章标题，应具有学术风格",
          "minLength": 10,
          "maxLength": 200
        },
        "authors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/author"
          },
          "minItems": 1,
          "description": "作者列表"
        },
        "corresponding_author": {
          "$ref": "#/definitions/author",
          "description": "通讯作者"
        },
        "abstract": {
          "type": "string",
          "description": "文章摘要，200-500字",
          "minLength": 200,
          "maxLength": 500
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 3,
          "maxItems": 8,
          "description": "关键词列表"
        },
        "publication_date": {
          "type": "string",
          "format": "date",
          "description": "发表日期，YYYY-MM-DD格式"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["被打核心", "垃科院一区silence", "nothing"]
          },
          "minItems": 1,
          "maxItems": 3,
          "description": "期刊标签"
        },
        "content": {
          "type": "string",
          "description": "文章正文内容，可使用Lorem ipsum等占位文本"
        },
        "references": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 5,
          "maxItems": 20,
          "description": "参考文献列表"
        },
        "doi": {
          "type": "string",
          "description": "虚假DOI号，格式：10.1234/jor.年份.序号",
          "pattern": "^10\\.\\d{4}/jor\\.\\d{4}\\.\\d{3}$"
        },
        "views": {
          "type": "integer",
          "description": "虚拟阅读量，用于展示",
          "minimum": 100,
          "maximum": 10000
        },
        "citations": {
          "type": "integer",
          "description": "虚拟引用次数",
          "minimum": 0,
          "maximum": 50
        }
      },
      "required": ["id", "title", "authors", "abstract", "keywords", "publication_date", "tags", "content", "doi"]
    },
    "author": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "作者姓名"
        },
        "affiliation": {
          "type": "string",
          "description": "作者单位"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "作者邮箱（虚假）"
        },
        "orcid": {
          "type": "string",
          "description": "虚假ORCID ID",
          "pattern": "^\\d{4}-\\d{4}-\\d{4}-\\d{3}[\\dX]$"
        }
      },
      "required": ["name", "affiliation"]
    }
  }
}
```

### 4.2 数据生成策略

**虚假数据生成原则**:
1. **真实性**: 数据应符合学术规范，看起来真实可信
2. **多样性**: 20篇文章在主题、作者、单位等方面应有一定差异
3. **一致性**: 数据格式严格遵循JSON Schema定义
4. **娱乐性**: 适当加入幽默元素，符合"做着玩"的定位

**数据生成脚本示例** (Node.js):
```javascript
// generate-articles.js
const fs = require('fs');
const { faker } = require('@faker-js/faker');

function generateArticle(id) {
    const tags = ["被打核心", "垃科院一区silence", "nothing"];
    const selectedTags = faker.helpers.arrayElements(tags, faker.number.int({ min: 1, max: 3 }));
    
    return {
        id: id,
        title: generateAcademicTitle(),
        authors: generateAuthors(faker.number.int({ min: 1, max: 5 })),
        abstract: generateAbstract(),
        keywords: generateKeywords(),
        publication_date: faker.date.past({ years: 2 }).toISOString().split('T')[0],
        tags: selectedTags,
        content: generateContent(),
        references: generateReferences(),
        doi: `10.1234/jor.2025.${id.toString().padStart(3, '0')}`,
        views: faker.number.int({ min: 100, max: 10000 }),
        citations: faker.number.int({ min: 0, max: 50 })
    };
}

function generateArticles(count = 20) {
    const articles = [];
    for (let i = 1; i <= count; i++) {
        articles.push(generateArticle(i));
    }
    
    return {
        metadata: {
            version: "1.0.0",
            generated_at: new Date().toISOString(),
            total_articles: count
        },
        articles: articles
    };
}

// 保存到文件
const data = generateArticles(20);
fs.writeFileSync('./data/articles.json', JSON.stringify(data, null, 2));
```

### 4.3 数据关系图

```
文章 (Article)
├── 1:N ── 作者 (Author)
│         ├── 姓名 (name)
│         ├── 单位 (affiliation)
│         ├── 邮箱 (email, 虚假)
│         └── ORCID (虚假)
│
├── 1:N ── 关键词 (Keyword)
│
├── 1:N ── 标签 (Tag)
│         ├── 被打核心
│         ├── 垃科院一区silence
│         └── nothing
│
├── 1:N ── 参考文献 (Reference)
│
├── 1:1 ── DOI号 (虚假)
├── 1:1 ── 虚拟阅读量
└── 1:1 ── 虚拟引用次数
```

### 4.4 数据文件组织

```
data/
├── articles.json                    # 完整文章数据（开发环境）
├── articles.min.json                # 压缩版文章数据（生产环境）
├── search-index.json                # 预构建的搜索索引（可选）
└── metadata.json                    # 网站元数据
```

**数据加载策略**:
1. **开发环境**: 使用未压缩的articles.json，便于调试
2. **生产环境**: 使用articles.min.json，减少传输体积
3. **增量加载**: 首页只加载文章摘要，详情页加载完整内容
4. **缓存策略**: 使用localStorage缓存，有效期24小时

---

## 5. 非功能性设计

### 5.1 性能优化设计

#### 5.1.1 加载性能优化
| 优化措施 | 实现方案 | 预期效果 |
|---------|---------|---------|
| **资源压缩** | 使用Terser压缩JS，CSSNano压缩CSS，HTMLMinifier压缩HTML | 减少文件体积30-70% |
| **图片优化** | 使用WebP格式，响应式图片，懒加载 | 减少图片请求体积50-80% |
| **字体优化** | 使用系统字体为主，Web字体子集化 | 减少字体文件体积 |
| **代码分割** | 按路由分割代码，首页只加载必要JS | 减少首屏JS体积 |
| **预加载** | 使用`<link rel="preload">`预加载关键资源 | 加速关键资源加载 |

#### 5.1.2 运行时性能优化
| 优化措施 | 实现方案 | 预期效果 |
|---------|---------|---------|
| **虚拟滚动** | 大量搜索结果使用虚拟滚动 | 减少DOM节点，提高滚动性能 |
| **防抖节流** | 搜索输入防抖，滚动事件节流 | 减少不必要计算和渲染 |
| **内存管理** | 及时清理事件监听器，避免内存泄漏 | 保持应用稳定运行 |
| **缓存策略** | 文章数据本地缓存，CDN缓存静态资源 | 减少网络请求 |

#### 5.1.3 性能监控
```javascript
// 性能监控脚本
class PerformanceMonitor {
    static reportMetrics() {
        // 核心Web指标监控
        if ('PerformanceObserver' in window) {
            const observer = new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    console.log(`[Performance] ${entry.name}: ${entry.startTime}ms`);
                    
                    // LCP (最大内容绘制)
                    if (entry.entryType === 'largest-contentful-paint') {
                        this.reportToAnalytics('LCP', entry.startTime);
                    }
                    
                    // FID (首次输入延迟)
                    if (entry.entryType === 'first-input') {
                        this.reportToAnalytics('FID', entry.processingStart - entry.startTime);
                    }
                }
            });
            
            observer.observe({ entryTypes: ['largest-contentful-paint', 'first-input'] });
        }
    }
}
```

### 5.2 安全性设计

#### 5.2.1 前端安全措施
| 安全威胁 | 防护措施 | 实现方案 |
|---------|---------|---------|
| **XSS攻击** | 输入输出编码，CSP策略 | 设置Content-Security-Policy头<br>使用textContent代替innerHTML |
| **CSRF攻击** | 静态网站无状态，不涉及 | 无需特别防护 |
| **点击劫持** | X-Frame-Options头 | 设置`X-Frame-Options: DENY` |
| **信息泄露** | 减少敏感信息暴露 | 虚假数据不包含真实信息 |

#### 5.2.2 内容安全策略 (CSP)
```html
<!-- 在生产环境HTML中添加 -->
<meta http-equiv="Content-Security-Policy" 
      content="default-src 'self'; 
               script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
               style-src 'self' 'unsafe-inline';
               img-src 'self' data: https:;
               font-src 'self';
               connect-src 'self'">
```

#### 5.2.3 安全响应头配置
```nginx
# 在部署服务器配置（如Netlify的_headers文件）
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: geolocation=(), microphone=(), camera=()
```

### 5.3 容错与可靠性设计

#### 5.3.1 错误边界处理
```javascript
// 全局错误处理器
class ErrorHandler {
    static init() {
        // 未捕获的Promise错误
        window.addEventListener('unhandledrejection', (event) => {
            console.error('[Unhandled Promise Rejection]', event.reason);
            this.showUserFriendlyError('系统繁忙，请稍后重试');
        });
        
        // 未捕获的JavaScript错误
        window.addEventListener('error', (event) => {
            console.error('[JavaScript Error]', event.error);
            this.logErrorToServer(event.error);
        });
        
        // 网络错误处理
        this.setupNetworkErrorHandling();
    }
    
    static showUserFriendlyError(message) {
        // 显示用户友好的错误提示，而不是控制台错误
        const errorDiv = document.createElement('div');
        errorDiv.className = 'global-error';
        errorDiv.innerHTML = `
            <div class="error-content">
                <p>${message}</p>
                <button onclick="this.parentElement.parentElement.remove()">关闭</button>
            </div>
        `;
        document.body.appendChild(errorDiv);
    }
}
```

#### 5.3.2 降级策略
| 功能 | 正常方案 | 降级方案 |
|------|---------|---------|
| **文章数据加载** | 从JSON文件异步加载 | 使用内置的默认数据 |
| **搜索功能** | 客户端JavaScript搜索 | 显示"搜索功能暂不可用"提示 |
| **弹窗交互** | CSS+JavaScript模态框 | 使用浏览器原生alert() |
| **响应式布局** | CSS Grid/Flexbox | 简单流式布局 |

#### 5.3.3 数据一致性保障
```javascript
// 数据验证与修复
class DataIntegrity {
    static validateArticle(article) {
        const requiredFields = ['id', 'title', 'authors', 'abstract', 'publication_date'];
        const missingFields = requiredFields.filter(field => !article[field]);
        
        if (missingFields.length > 0) {
            console.warn(`Article ${article.id} missing fields:`, missingFields);
            return false;
        }
        
        // 修复常见数据问题
        if (!Array.isArray(article.tags)) {
            article.tags = ['nothing']; // 默认标签
        }
        
        if (!article.doi) {
            article.doi = `10.1234/jor.2025.${article.id.toString().padStart(3, '0')}`;
        }
        
        return true;
    }
}
```

### 5.4 可维护性设计

#### 5.4.1 代码组织结构
```
src/
├── components/          # 可复用组件
│   ├── Header/
│   │   ├── Header.js
│   │   ├── Header.css
│   │   └── Header.test.js
│   ├── ArticleCard/
│   └── Modal/
├── modules/             # 功能模块
│   ├── article/
│   ├── search/
│   └── modal/
├── utils/               # 工具函数
│   ├── dateFormatter.js
│   ├── stringUtils.js
│   └── validation.js
├── styles/              # 全局样式
│   ├── base.css
│   ├── variables.css
│   └── utilities.css
└── constants/           # 常量定义
    ├── journalTags.js
    └── apiEndpoints.js
```

#### 5.4.2 配置管理
```javascript
// config.js - 环境配置管理
const config = {
    // 开发环境
    development: {
        apiBaseUrl: '',
        debug: true,
        useMockData: true,
        logLevel: 'debug'
    },
    
    // 生产环境
    production: {
        apiBaseUrl: 'https://yourusername.github.io/journal-of-rubbish',
        debug: false,
        useMockData: false,
        logLevel: 'error'
    }
};

const environment = process.env.NODE_ENV || 'development';
export default config[environment];
```

#### 5.4.3 文档与注释规范
1. **JSDoc注释**: 所有函数和类使用JSDoc注释
2. **组件文档**: 每个组件包含README.md，说明用途和API
3. **变更日志**: 维护CHANGELOG.md，记录重要变更
4. **API文档**: 如有API接口，提供OpenAPI/Swagger文档

### 5.5 可测试性设计

#### 5.5.1 测试策略
| 测试类型 | 测试工具 | 测试范围 |
|---------|---------|---------|
| **单元测试** | Jest + Testing Library | 工具函数、业务逻辑 |
| **组件测试** | Jest + Testing Library | React/Vue组件 |
| **集成测试** | Cypress | 用户流程、跨模块交互 |
| **性能测试** | Lighthouse | 性能指标、最佳实践 |
| **兼容性测试** | BrowserStack | 多浏览器、多设备 |

#### 5.5.2 测试覆盖率目标
| 文件类型 | 覆盖率目标 | 备注 |
|---------|-----------|------|
| 工具函数 | ≥90% | 核心工具函数必须完全覆盖 |
| 业务逻辑 | ≥80% | 主要业务路径必须覆盖 |
| 组件 | ≥70% | 组件主要功能和行为 |
| 整体 | ≥75% | 项目整体测试覆盖率 |

#### 5.5.3 测试数据管理
```javascript
// __tests__/testData.js
export const mockArticles = [
    {
        id: 1,
        title: "测试文章标题",
        authors: [{ name: "测试作者", affiliation: "测试单位" }],
        abstract: "测试摘要内容",
        tags: ["被打核心"],
        publication_date: "2025-01-01"
    }
    // ... 更多测试数据
];

// 测试工具函数
export const createTestArticle = (overrides = {}) => ({
    id: 1,
    title: "默认测试标题",
    authors: [{ name: "默认作者", affiliation: "默认单位" }],
    abstract: "默认摘要",
    tags: ["nothing"],
    publication_date: "2025-01-01",
    ...overrides
});
```

### 5.6 部署与运维设计

#### 5.6.1 部署流程
```yaml
# GitHub Actions 部署配置 (.github/workflows/deploy.yml)
name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build
        run: npm run build
      
      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@4.1.5
        with:
          branch: gh-pages
          folder: dist
```

#### 5.6.2 监控与告警
| 监控项 | 监控工具 | 告警阈值 |
|-------|---------|---------|
| **网站可用性** | UptimeRobot | 连续5分钟不可用 |
| **性能指标** | Google Analytics + Lighthouse CI | LCP > 2.5秒 |
| **错误率** | Sentry | JS错误率 > 0.1% |
| **用户行为** | Google Analytics | 异常流量波动 |

#### 5.6.3 备份策略
1. **代码备份**: GitHub仓库自动备份
2. **数据备份**: 文章JSON文件定期导出备份
3. **配置备份**: 部署配置版本化管理
4. **恢复流程**: 文档化的灾难恢复流程

---

## 6. 附录

### 6.1 技术风险与应对措施

| 风险点 | 影响程度 | 发生概率 | 应对措施 |
|--------|---------|---------|---------|
| GitHub Pages服务中断 | 高 | 低 | 准备Netlify/Vercel备用部署 |
| 浏览器兼容性问题 | 中 | 中 | 渐进增强，提供降级体验 |
| 文章数据加载失败 | 中 | 低 | 内置默认数据，错误重试机制 |
| 搜索性能问题 | 低 | 中 | 结果数量限制，虚拟滚动 |
| CDN缓存问题 | 低 | 低 | 版本化资源，强制刷新机制 |

### 6.2 后续演进规划

**Phase 1 (MVP)**: 基础静态网站，20篇文章，基本搜索功能
**Phase 2 (增强)**: 增加文章分类、更多交互元素、动画效果
**Phase 3 (扩展)**: 增加"投稿系统"模拟、审稿流程展示等高级功能
**Phase 4 (优化)**: 性能优化、SEO优化、数据分析集成

### 6.3 相关资源参考

1. **静态网站生成器**: https://www.11ty.dev/ (备选方案)
2. **前端搜索库**: https://lunrjs.com/ (高级搜索需求)
3. **响应式设计**: https://web.dev/responsive-web-design-basics/
4. **性能优化**: https://web.dev/fast/
5. **安全实践**: https://cheatsheetseries.owasp.org/

---

**文档审批**  
- [ ] 系统架构师审核  
- [ ] 技术负责人审核  
- [ ] 开发团队评审

**更新记录**  
| 版本 | 日期 | 修改说明 | 修改人 |
|------|------|---------|-------|
| 1.0 | 2026-01-21 | 初始版本创建 | 系统架构师 |
